# ============================================
# DISTRIBUTED NOTIFICATION SYSTEM - PRODUCTION
# ============================================
# 
# üöÄ THIS IS FOR PRODUCTION DEPLOYMENT!
# 
# Usage:
#   1. Copy this file: cp .env.prod.example .env.prod
#   2. Edit .env.prod and change ALL passwords and credentials
#   3. Deploy: docker compose -f docker-compose.prod.yml --env-file .env.prod up -d
# 
# ‚ö†Ô∏è  SECURITY WARNING:
#   - Change ALL passwords from default values
#   - Use real SMTP and FCM credentials
#   - Never commit .env.prod to git
#   - Use strong passwords (openssl rand -base64 32)
# 
# See ENVIRONMENT_SETUP.md and PRODUCTION_DEPLOYMENT.md for details.
# ============================================

# ==============================================
# DATABASE CONFIGURATION
# ==============================================

# User Service Database
USER_DB_HOST=user-db
USER_DB_PORT=5432
USER_DB_USER=user_service
USER_DB_PASSWORD=CHANGE_THIS_SECURE_PASSWORD
USER_DB_NAME=user_service_db

# Template Service Database
TEMPLATE_DB_HOST=template-db
TEMPLATE_DB_PORT=5432
TEMPLATE_DB_USER=template_service
TEMPLATE_DB_PASSWORD=CHANGE_THIS_SECURE_PASSWORD
TEMPLATE_DB_NAME=template_service_db

# API Gateway Database
GATEWAY_DB_HOST=gateway-db
GATEWAY_DB_PORT=5432
GATEWAY_DB_USER=gateway_service
GATEWAY_DB_PASSWORD=CHANGE_THIS_SECURE_PASSWORD
GATEWAY_DB_NAME=gateway_service_db

# ==============================================
# REDIS CONFIGURATION
# ==============================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# ==============================================
# RABBITMQ CONFIGURATION
# ==============================================
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_USER=notification_user
RABBITMQ_PASSWORD=CHANGE_THIS_SECURE_PASSWORD

# ==============================================
# SERVICE URLS (Internal Docker Network)
# ==============================================
USER_SERVICE_URL=http://user-service-nestjs:3000
TEMPLATE_SERVICE_URL=http://template-service:3000




API_GATEWAY_PORT=8000
USER_SERVICE_PORT=8001
TEMPLATE_SERVICE_PORT=8002


SMTP_HOST=smtp.mailtrap
SMTP_PORT=225
SMTP_USER=your_username
SMTP_PASSWORD=your_password
SMTP_FROM=noreply@example.com

# ==============================================
# FIREBASE CLOUD MESSAGING (Push Service)
# ==============================================
# Path to FCM credentials JSON file inside container
FCM_CREDENTIALS_FILE=/app/fcm-credentials.json
# Path to FCM credentials JSON file on host (for volume mount if needed)
FCM_CREDENTIALS_PATH=./push-service/fcm-credentials.json

# ==============================================
# SECURITY
# ==============================================
# Generate a strong random secret key:
# python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=CHANGE_THIS_GENERATE_A_STRONG_RANDOM_KEY_32_CHARS_MIN
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ==============================================
# APPLICATION SETTINGS
# ==============================================
ENVIRONMENT=production
LOG_LEVEL=INFO
DEBUG=False

# ==============================================
# MONITORING & OBSERVABILITY (Optional)
# ==============================================
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# GRAFANA_API_KEY=your-grafana-api-key
# PROMETHEUS_ENABLED=true

# ==============================================
# CORS SETTINGS
# ==============================================
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=https://your-frontend-domain.com,https://admin.your-domain.com

# ==============================================
# RATE LIMITING
# ==============================================
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# ==============================================
# QUEUE SETTINGS
# ==============================================
EXCHANGE_NAME=notifications
EMAIL_QUEUE=email.queue
PUSH_QUEUE=push.queue
FAILED_QUEUE=failed.queue

# ==============================================
# RETRY CONFIGURATION
# ==============================================
MAX_RETRY_ATTEMPTS=3
RETRY_DELAY_SECONDS=5

# ==============================================
# CIRCUIT BREAKER CONFIGURATION
# ==============================================
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT_SECONDS=60

# ==============================================
# PERFORMANCE TUNING
# ==============================================
# Worker process configuration
WORKER_CONNECTIONS=1000
WORKER_PREFETCH_COUNT=10
POOL_SIZE=10
MAX_OVERFLOW=20

# ==============================================
# BACKUP SETTINGS (Optional)
# ==============================================
# BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
# BACKUP_RETENTION_DAYS=30
# BACKUP_S3_BUCKET=your-backup-bucket
